{% extends 'base.html' %}

{% load crispy_forms_tags %}

{% block content %}

<h1 class="text-center my-5">Microsoft Trust Store Certificates</h1>
<div class="container-fluid">
  <div class="row">
    <div class="col-lg-4">
      <h2>Total de certificados: <strong>{{ count }}</strong></h2>
    </div>
    <div class="col-lg-4">
      <h3>Número de certificados por tipo de llave</h3>
      <ul class="list-group">
        {% for alg in algs_list %}
        <li class="list-group-item">{{alg.0}} : {{alg.1}}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="col-lg-4">
      <h3>Número de llaves por tamaño (bits)</h3>
      <ul class="list-group">
        {% for key_len in keys_lens %}
        <li class="list-group-item">{{key_len.0}} : {{key_len.1}}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<div class="table-responsive">
  <form action="" method="POST" class="my-4">
    {% csrf_token %}
    <label for="sort">Ordenar certificados por:</label>
    <select class="dropdown" name="sort" id="sort">
      <option class="dropdown-item" value="new">Más nuevos</option>
      <option class="dropdown-item" value="old">Más antiguos</option>
      <option class="dropdown-item" value="expire">Por expirar</option>
    </select>
    <button type="submit" class="btn btn-light">Ordenar</button>
  </form>
  
  <table class="table table-striped table-bordered table-trust-store mx-4 mb-5" style="width: 96.5%;">
  <thead class="table-dark">
    <tr>
      <th scope="col">Nombre</th>
      <th scope="col">Validez</th>
      <th scope="col">Llave pública</th>
      <th scope="col">Usos de la llave</th>
      <th scope="col">SHA-1</th>
    </tr>
  </thead>
  <tbody>
  {% for cert in certificates %}
      <tr>
          {% for data in cert.values %}
          <td style="width: 18%" class="text-start">{{data}}</td>
          {% endfor %}
      </tr>
  {% endfor %}
  </tbody>
</table>

<footer class="pt-3">
  <button class="btn btn-primary mb-4"><a href="{% url 'index' %}" style="text-decoration: none; color: aliceblue;">Regresar</a></button>
</footer>
{% endblock %}